/* ===========================
   TOKENS
   =========================== */
:root{
  --bg:#0f1113;
  --panel:#14171a;
  --panel-2:#0d0f11;
  --ink:#e7e7e7;
  --muted:#a9b0b8;
  --accent:#d3b36b;
  --accent-ink:#1b1b1b;
  --ok:#70e000;

  --radius:14px;
  --gap:12px;
  --shadow:0 4px 14px rgba(0,0,0,.35);
  --trans:.18s ease;

  --leftcol-w: 600px; /* ancho col. izquierda */
}

/* ===========================
   BASE
   =========================== */
*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font:15px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell;
  overflow:hidden;
}

.app{
  display:flex;
  flex-direction:column;
  gap:var(--gap);
  height:100vh;
  padding:clamp(8px,1.2vw,18px);
}

/* ===========================
   TOOLBAR (una sola fila)
   =========================== */
.toolbar {
  display:flex;
  flex-wrap:nowrap;
  overflow-x:auto;
  gap:var(--gap);
  padding-bottom:2px;
  scrollbar-width:thin;
}
.sysbtn{
  flex:0 0 auto;
  width:110px;
  min-height:74px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
  border-radius:var(--radius);
  background:#2a2f35;
  color:var(--ink);
  box-shadow:var(--shadow);
  border:1px solid rgba(255,255,255,.06);
  cursor:pointer;
  transition:transform var(--trans),filter var(--trans),background var(--trans);
}
.sysbtn i{font-size:22px;opacity:.95}
.sysbtn span{font-weight:600;font-size:12px;opacity:.9;text-align:center}
.sysbtn:hover{filter:brightness(1.05)}
.sysbtn:active{transform:translateY(1px)}
.sysbtn--accent{background:var(--accent);color:var(--accent-ink)}
.toolbar::-webkit-scrollbar{height:8px}
.toolbar::-webkit-scrollbar-thumb{background:#2f3a44;border-radius:999px}

/* ===========================
   GRID PRINCIPAL (2x2)
   =========================== */
.shell {
  display: grid;
  grid-template-columns: var(--leftcol-w) 1fr;
  grid-template-rows: 1fr 1.2fr; /* 游댃 antes: 1fr 1fr */
  grid-template-areas:
    "ticket controls"
    "familias articulos";
  gap: var(--gap);
  flex: 1;
  min-height: 0;
  overflow: hidden;
  height: 100%;
}

/* ===========================
   DIV 2: TICKET
   =========================== */
.ticket{
  grid-area:ticket;
  display:flex;
  flex-direction:column;
  gap:var(--gap);
  background:var(--panel);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px;
  min-height:0;
  overflow:hidden;
}
.ticket-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.ticket-head .title{font-weight:800;letter-spacing:.4px}
.pills{display:flex;gap:8px;flex-wrap:wrap}
.pill{
  background:#2c343b;
  border:1px solid rgba(255,255,255,.07);
  padding:8px 12px;
  border-radius:999px;
  font-weight:700;
  font-size:13px;
}

.pill i {
  margin-right: 6px;
  opacity: 0.85;
}


/* Tabla del ticket */
.ticket-grid{
  flex:1 1 auto;
  min-height:0;
  background:var(--panel-2);
  border:1px solid rgba(255,255,255,.06);
  border-radius:10px;
  overflow:auto;
}
.ticket-table{
  width:100%;
  border-collapse:collapse;
  table-layout:fixed;
}
.ticket-table thead th{
  position:sticky;
  top:0;
  z-index:1;
  background:#1a1f23;
  color:#d7dee6;
  text-align:left;
  font-size:12px;
  font-weight:700;
  padding:10px 12px;
  border-bottom:1px solid rgba(255,255,255,.06);
}
.ticket-table tbody td{
  padding:8px 10px;
  border-bottom:1px dashed rgba(255,255,255,.07);
  color:#dfe5ec;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Pie del ticket */
.ticket-actions{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-top:4px;
}
.big-total{font-size:34px;font-weight:900;color:var(--ok)}
.btn-row{display:flex;gap:10px}
.iconbtn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  background:#26303a;
  border:1px solid rgba(255,255,255,.07);
  padding:10px 14px;
  border-radius:12px;
  cursor:pointer;
  transition:filter var(--trans),transform var(--trans);
}
.iconbtn i{font-size:18px}
.iconbtn:hover{filter:brightness(1.08)}
.iconbtn:active{transform:translateY(1px)}

/* ===========================
   DIV 3: CONTROLS
   =========================== */
.controls{
  grid-area:controls;
  display:flex;
  flex-direction:column;
  gap:var(--gap);
  background:transparent;
  min-height:0;
  overflow:hidden;
}
.controls .controls-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.strong{font-weight:900;letter-spacing:.3px}
.search-input{
  background:#2c343b;
  border:1px solid rgba(255,255,255,.07);
  border-radius:12px;
  padding:8px 12px;
  outline:none;
  color:#e7e7e7;
  min-width:220px;
}

/* ===========================
   DIV 4: FAMILIAS (con imagen)
   =========================== */
.familias-panel{
  grid-area:familias;
  display:flex;
  flex-direction:column;
  gap:8px;
  background:var(--panel);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px;
  min-height:0;
  overflow:hidden;
}
.familias-title{
  margin:0;
  font-size:12px;
  letter-spacing:.4px;
  opacity:.8;
  font-weight:800;
}
.categories {
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(4, 1fr); /* 游녣 Fuerza 4 columnas */
  grid-auto-rows: 1fr;                   /* 游녣 Altura autom치tica por fila */
  align-content: start;
  flex: 1;
  min-height: 0;
  overflow: auto;
}


.cat{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  color:#fff;
  border-radius:var(--radius);
  font-weight:900;
  font-size:1rem;
  min-height:90px;
  cursor:pointer;
  overflow:hidden;
  box-shadow:var(--shadow);
  border:1px solid rgba(255,255,255,0.07);
  transition:transform var(--trans),filter var(--trans);
  background:#1e1e1e;
}
.cat::before{
  content:"";
  position:absolute;
  inset:0;
  background-image:var(--bg-img);
  background-size:cover;
  background-position:center;
  filter:brightness(0.55);
  transition:filter var(--trans);
}
.cat::after{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(0,0,0,0.15);
  transition:background var(--trans);
}
.cat span{
  position:relative;
  z-index:2;
  padding:0 8px;
  text-shadow:0 2px 4px rgba(0,0,0,0.6);
}
.cat:hover::before{filter:brightness(0.75)}
.cat:hover::after{background:rgba(0,0,0,0.25)}
.cat:active{transform:translateY(1px)}
.cat.active{outline:2px solid var(--accent);filter:brightness(1.15)}

/* ===========================
   DIV 5: ART칈CULOS (actualizado)
   =========================== */
.articles-panel{
  grid-area:articulos;
  display:flex;
  flex-direction:column;
  gap:8px;
  background:var(--panel);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px;
  min-height:0;
  overflow:hidden;
}

/* 游댲 A침ade este bloque aqu칤 */
.familia-actual {
  font-weight:800;
  font-size:0.9rem;
  margin-left:10px;
  color:var(--accent);
  opacity:0.9;
  text-transform:uppercase;
}

/* Luego sigue el resto */
.products-grid{
  display:grid;
  gap:var(--gap);
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  align-content:start;
  flex:1;
  min-height:0;
  overflow:auto;
  padding-right:6px;
}


.prod {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 16px 12px;
  border-radius: var(--radius);
  border: 1px solid rgba(255,255,255,.07);
  background: #1c2329; /* base neutro oscuro */
  font-weight: 800;
  height: 130px; /* 游댳 altura fija uniforme */
  box-shadow: var(--shadow);
  cursor: pointer;
  overflow: hidden;
  transition: transform var(--trans), filter var(--trans);
  flex: 0 0 auto; /* evita estirarse por contenido */
}

.prod > div {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 6px;
  text-align: center;
}

.prod:hover::before { filter: brightness(1.1); }
.prod:active { transform: translateY(1px); }


/* capa del color del producto */
.prod::before{
  content:"";
  position:absolute;
  inset:0;
  opacity:0.9;
  background:var(--prod-color,#20303a);
  z-index:0;
  border-radius:inherit;
  transition:filter var(--trans);
}

/* texto encima */
.prod > *{
  position:relative;
  z-index:2;
}

.prod:hover::before{filter:brightness(1.1)}
.prod:active{transform:translateY(1px)}

/* ===========================
   COLORES DE PRODUCTOS (actualizado)
   =========================== */
.is-yellow { --prod-color: #ffe16a; color:#222; }
.is-cyan   { --prod-color: #7cf1ff; color:#0b2230; }
.is-green  { --prod-color: #74f7a1; color:#0e2216; }
.is-red    { --prod-color: #ff5b5b; color:#1a0e0e; }
.is-lilac  { --prod-color: #e5a6ff; color:#220d2a; }

/* ===========================
   SCROLLBARS
   =========================== */
.ticket-grid::-webkit-scrollbar,
.products-grid::-webkit-scrollbar,
.categories::-webkit-scrollbar{height:10px;width:10px}
.ticket-grid::-webkit-scrollbar-thumb,
.products-grid::-webkit-scrollbar-thumb,
.categories::-webkit-scrollbar-thumb{background:#2f3a44;border-radius:999px}


/* ===========================
MODAL (Art칤culos R치pidos)   
   =========================== */
/* Estilos para el modal general */
.modal {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
}

.modal.hidden {
  display: none;
}

.modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
}

/* Modal m치s ancho y alto */
.modal-content {
  position: relative;
  background: #1a1a1a;
  color: #fff;
  padding: 20px;
  border-radius: 8px;
  width: 90%;
  height: 80%;
  max-width: 960px;
  overflow: hidden;
  z-index: 1;
  display: flex;
  flex-direction: column;
}

.modal-content h2 {
  margin: 0 0 16px;
  font-size: 1.6em;
}

/* Botones estilo art칤culos */
.grid-articulos {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
  overflow-y: auto;
  flex-grow: 1;
  padding-right: 8px;
}

/* Cierre */
.iconbtn {
  margin-top: 14px;
  padding: 10px 14px;
  background: #444;
  color: #fff;
  border: none;
  border-radius: 6px;
  align-self: flex-end;
  cursor: pointer;
}
.iconbtn:hover {
  background: #666;
}
